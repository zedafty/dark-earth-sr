<input type="hidden" name="attr_sheet-version" value="0"/><input type="hidden" name="attr_sheet-init" value="0"/><input type="hidden" name="attr_sheet-lang" value=""/><input type="hidden" name="attr_sheet-theme" class="theme" value="default"/><input type="hidden" name="attr_sheet-type" class="type" value="pc"/><input type="hidden" name="attr_settings-toggle" value="0"/><input type="hidden" name="attr_wgm" value=""/><div class="page"><div class="heading"><div class="logo"><span></span></div><div><div class="character-name"><small data-i18n="char-name"></small><input type="text" class="input" name="attr_char-name" title="@{char-name}" data-i18n-placeholder="char-name-pl"/></div><div class="character-stats"><div><div><label data-i18n="char-caste"></label><input type="text" name="attr_char-caste" title="@{char-caste}" data-i18n-placeholder="char-caste-pl"/></div><div><label data-i18n="char-role"></label><input type="text" name="attr_char-role" title="@{char-role}" data-i18n-placeholder="char-role-pl"/></div></div><div><div><label data-i18n="char-gender"></label><select name="attr_char-gender" title="@{char-gender}"><option value="male" data-i18n="char-gender-male" selected="selected"></option><option value="female" data-i18n="char-gender-female"></option><option value="other" data-i18n="char-gender-other"></option></select></div><div><label data-i18n="char-age"></label><input type="number" name="attr_char-age" title="@{char-age}" min="0" value="18"/></div></div></div><div class="modbar"><div><span data-i18n="bonus"></span><input type="radio" name="attr_mod" title="@{mod}" value="0" style="display: none;" checked="checked"/><div class="group bonus"><label><input type="radio" name="attr_mod" title="@{mod}" value="1"/><span data-i18n="bonus-1d"></span></label><label><input type="radio" name="attr_mod" title="@{mod}" value="2"/><span data-i18n="bonus-2d"></span></label><label><input type="radio" name="attr_mod" title="@{mod}" value="3"/><span data-i18n="bonus-3d"></span></label><label><input type="radio" name="attr_mod" title="@{mod}" value="4"/><span data-i18n="bonus-4d"></span></label><label><input type="radio" name="attr_mod" title="@{mod}" value="5"/><span data-i18n="bonus-5d"></span></label></div><span data-i18n="malus"></span><div class="group malus"><label><input type="radio" name="attr_mod" title="@{mod}" value="-1"/><span data-i18n="malus-1d"></span></label><label><input type="radio" name="attr_mod" title="@{mod}" value="-2"/><span data-i18n="malus-2d"></span></label><label><input type="radio" name="attr_mod" title="@{mod}" value="-3"/><span data-i18n="malus-3d"></span></label><label><input type="radio" name="attr_mod" title="@{mod}" value="-4"/><span data-i18n="malus-4d"></span></label><label><input type="radio" name="attr_mod" title="@{mod}" value="-5"/><span data-i18n="malus-5d"></span></label></div><input type="hidden" name="attr_mod-reset-show" value="0"/><button type="action" name="act_mod-reset" title="%{mod-reset}"><span data-i18n="reset"></span></button></div><div class="roller"><button type="action" name="act_roll" title="%{roll}"><span data-i18n="roll"></span></button><input type="number" name="attr_roll" title="@{roll}" min="0" max="10" value="0"/></div><span class="whisper-toggle"><input type="checkbox" name="attr_whisper-toggle" title="@{whisper-toggle}" value="1"/><span class="whisper-gm" data-i18n="whisper-gm"></span><span class="whisper-all" data-i18n="whisper-all"></span></span><span class="settings-toggle"><input type="checkbox" name="attr_settings-toggle" title="@{settings-toggle}" value="1"/><span data-i18n="show-hide-settings"></span></span></div></div></div><div class="settings"><div class="sheet"><h4 data-i18n="sheet"></h4><div class="line"><label data-i18n="sheet-type"></label><select name="attr_sheet-type" title="@{sheet-type}"><option value="pc" data-i18n="sheet-type-pc" selected="selected"></option><option value="npc" data-i18n="sheet-type-npc"></option><option value="cre" data-i18n="sheet-type-cre"></option></select></div><div class="line"><label data-i18n="sheet-theme"></label><select name="attr_sheet-theme" title="@{theme}"><option value="default" data-i18n="sheet-theme-default" selected="selected"></option><option value="light" data-i18n="sheet-theme-light"></option><option value="dark" data-i18n="sheet-theme-dark"></option></select></div><div class="recalc"><button type="action" name="act_recalc" title="%{recalc}" data-i18n="recalc"></button></div></div><div class="modifiers"><h4 data-i18n="modifiers"></h4><div><label data-i18n="health"></label><input type="number" name="attr_health-mod" title="@{health-mod}" value="5"/></div><div><label data-i18n="energy"></label><input type="number" name="attr_energy-mod" title="@{energy-mod}" value="0"/></div><div><label data-i18n="init"></label><input type="number" name="attr_init-mod" title="@{init-mod}" value="0"/></div><div><label data-i18n="encumbrance"></label><input type="number" name="attr_enc-mod" title="@{enc-mod}" value="0"/></div></div><div class="options"><h4 data-i18n="options"></h4><div><label class="check-box"><input type="checkbox" name="attr_mod-autoreset" title="@{mod-autoreset}" value="1"/><span data-i18n="opt-mod-autoreset"></span></label></div><div><label class="check-box"><input type="checkbox" name="attr_cond-autoset" title="@{cond-autoset}" value="1"/><span data-i18n="opt-cond-autoset"></span></label></div><div><label class="check-box"><input type="checkbox" name="attr_wpn-str-half" title="@{wpn-str-half}" value="1"/><span data-i18n="opt-wpn-str-half"></span></label></div><div><label class="check-box"><input type="checkbox" name="attr_wpn-def-shd" title="@{wpn-def-shd}" value="1"/><span data-i18n="opt-wpn-def-shd"></span></label></div></div></div><div class="two-columns col-7-13"><div><div class="abilities section border padding-top"><h4 data-i18n="abilities"></h4><div><div><div class="button-box"><button type="action" name="act_abi-str" title="%{abi-str}"><span data-i18n="abi-str"></span></button></div><div><small data-i18n="abi-str-pry"></small><small data-i18n="abi-str-car"></small><small data-i18n="abi-str-run"></small></div><input type="number" name="attr_abi-str" title="@{abi-str}" min="0" max="10" value="1"/></div><div><div class="button-box"><button type="action" name="act_abi-acr" title="%{abi-acr}"><span data-i18n="abi-acr"></span></button></div><div><small data-i18n="abi-acr-att"></small><small data-i18n="abi-acr-int"></small><small data-i18n="abi-acr-sur"></small></div><input type="hidden" name="attr_abi-acr-half" value="0"/><input type="number" name="attr_abi-acr" title="@{abi-acr}" min="0" max="10" value="1"/></div><div><div class="button-box"><button type="action" name="act_abi-agi" title="%{abi-agi}"><span data-i18n="abi-agi"></span></button></div><div><small data-i18n="abi-agi-hid"></small><small data-i18n="abi-agi-dod"></small><small data-i18n="abi-agi-cli"></small></div><input type="number" name="attr_abi-agi" title="@{abi-agi}" min="0" max="10" value="1"/></div><div><div class="button-box"><button type="action" name="act_abi-res" title="%{abi-res}"><span data-i18n="abi-res"></span></button></div><div><small data-i18n="abi-res-wit"></small><small data-i18n="abi-res-end"></small><small data-i18n="abi-res-reg"></small></div><input type="number" name="attr_abi-res" title="@{abi-res}" min="0" max="10" value="1"/></div><div><div class="button-box"><button type="action" name="act_abi-tem" title="%{abi-tem}"><span data-i18n="abi-tem"></span></button></div><div><small data-i18n="abi-tem-mot"></small><small data-i18n="abi-tem-res"></small><small data-i18n="abi-tem-ove"></small></div><input type="number" name="attr_abi-tem" title="@{abi-tem}" min="0" max="10" value="1"/></div><div><div class="button-box"><button type="action" name="act_abi-sen" title="%{abi-sen}"><span data-i18n="abi-sen"></span></button></div><div><small data-i18n="abi-sen-obs"></small><small data-i18n="abi-sen-dir"></small><small data-i18n="abi-sen-sea"></small></div><input type="number" name="attr_abi-sen" title="@{abi-sen}" min="0" max="10" value="1"/></div></div></div><div class="skills section border padding-top"><h4 data-i18n="skills"></h4><div><div><label data-i18n="skl-combat"></label><div><div><button type="action" name="act_skl-wpn-light" title="%{skl-wpn-light}" data-i18n="skl-wpn-light"></button></div><input type="number" name="attr_skl-wpn-light" title="@{skl-wpn-light}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-wpn-heavy" title="%{skl-wpn-heavy}" data-i18n="skl-wpn-heavy"></button></div><input type="number" name="attr_skl-wpn-heavy" title="@{skl-wpn-heavy}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-wpn-throw" title="%{skl-wpn-throw}" data-i18n="skl-wpn-throw"></button></div><input type="number" name="attr_skl-wpn-throw" title="@{skl-wpn-throw}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-wpn-fire" title="%{skl-wpn-fire}" data-i18n="skl-wpn-fire"></button></div><input type="number" name="attr_skl-wpn-fire" title="@{skl-wpn-fire}" min="0" max="10" value="0"/></div></div><div><label data-i18n="skl-communication"></label><div><div><button type="action" name="act_skl-bullshit" title="%{skl-bullshit}" data-i18n="skl-bullshit"></button></div><input type="number" name="attr_skl-bullshit" title="@{skl-bullshit}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-oratory" title="%{skl-oratory}" data-i18n="skl-oratory"></button></div><input type="number" name="attr_skl-oratory" title="@{skl-oratory}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-empathy" title="%{skl-empathy}" data-i18n="skl-empathy"></button></div><input type="number" name="attr_skl-empathy" title="@{skl-empathy}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-bargain" title="%{skl-bargain}" data-i18n="skl-bargain"></button></div><input type="number" name="attr_skl-bargain" title="@{skl-bargain}" min="0" max="10" value="0"/></div></div><div><label data-i18n="skl-erudition"></label><div><div><button type="action" name="act_skl-folklore" title="%{skl-folklore}" data-i18n="skl-folklore"></button></div><input type="number" name="attr_skl-folklore" title="@{skl-folklore}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-letters" title="%{skl-letters}" data-i18n="skl-letters"></button></div><input type="number" name="attr_skl-letters" title="@{skl-letters}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-territory" title="%{skl-territory}" data-i18n="skl-territory"></button></div><input type="number" name="attr_skl-territory" title="@{skl-territory}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-tradition" title="%{skl-tradition}" data-i18n="skl-tradition"></button></div><input type="number" name="attr_skl-tradition" title="@{skl-tradition}" min="0" max="10" value="0"/></div></div><div><label data-i18n="skl-technic"></label><div><div><button type="action" name="act_skl-construct" title="%{skl-construct}" data-i18n="skl-construct"></button></div><input type="number" name="attr_skl-construct" title="@{skl-construct}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-making" title="%{skl-making}" data-i18n="skl-making"></button></div><input type="number" name="attr_skl-making" title="@{skl-making}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-mecanical" title="%{skl-mecanical}" data-i18n="skl-mecanical"></button></div><input type="number" name="attr_skl-mecanical" title="@{skl-mecanical}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-medicine" title="%{skl-medicine}" data-i18n="skl-medicine"></button></div><input type="number" name="attr_skl-medicine" title="@{skl-medicine}" min="0" max="10" value="0"/></div></div><div><label data-i18n="skl-survival"></label><div><div><button type="action" name="act_skl-fauna" title="%{skl-fauna}" data-i18n="skl-fauna"></button></div><input type="number" name="attr_skl-fauna" title="@{skl-fauna}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-flora" title="%{skl-flora}" data-i18n="skl-flora"></button></div><input type="number" name="attr_skl-flora" title="@{skl-flora}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-darkness" title="%{skl-darkness}" data-i18n="skl-darkness"></button></div><input type="number" name="attr_skl-darkness" title="@{skl-darkness}" min="0" max="10" value="0"/></div><div class="merge-inputs"><div><button type="action" name="act_skl-stallite" title="%{skl-stallite}" data-i18n="skl-stallite"></button></div><input type="number" name="attr_skl-stallite" title="@{skl-stallite}" min="0" max="10" value="0"/></div></div><div><label data-i18n="notes"></label><div class="autoexpand"><textarea name="attr_notes" spellcheck="false" data-i18n-placeholder="notes-pl" title="@{notes}"></textarea><span name="attr_notes"></span></div></div></div></div></div><div><div class="two-columns col-4-1"><div class="resources-values section border"><h4 data-i18n="resources-and-values"></h4><div><div><small></small><div class="number-box"><small><abbr data-i18n="pts-abbr" data-i18-title="pts"></abbr></small><span></span><small><abbr data-i18n="max-abbr" data-i18-title="max"></abbr></small></div><label data-i18n="health"></label><div class="number-box"><input type="number" name="attr_health" title="@{health}" value="0" readonly="readonly"/><span>/</span><input type="number" name="attr_health_max" title="@{health|max}" value="0" readonly="readonly"/></div><small></small><div class="number-box"><small><abbr data-i18n="pts-abbr" data-i18-title="pts"></abbr></small><span></span><small><abbr data-i18n="max-abbr" data-i18-title="max"></abbr></small></div><label data-i18n="energy"></label><div class="number-box"><input type="number" name="attr_energy" title="@{sp}" min="0" value="0"/><span>/</span><input type="number" name="attr_energy_max" title="@{energy|max}" value="0" readonly="readonly"/></div><small></small><div class="number-box"><small><abbr data-i18n="val-abbr" data-i18-title="val"></abbr></small></div><div class="button-box"><button type="action" name="act_init" title="%{init}" data-i18n="init"></button></div><div class="number-box"><input type="number" name="attr_init" title="@{init}" value="0" readonly="readonly"/></div></div><div><small>&nbsp;</small><small></small><label data-i18n="wounds"></label><div class="number-box border"><input type="number" name="attr_wnd1" title="@{attr_wnd1}" min="0" max="50" value="0"/><span>/</span><input type="number" name="attr_wnd2" title="@{attr_wnd2}" min="0" max="50" value="0"/><span>/</span><input type="number" name="attr_wnd3" title="@{attr_wnd3}" min="0" max="50" value="0"/><span>/</span><input type="number" name="attr_wnd4" title="@{attr_wnd4}" min="0" max="50" value="0"/><span>/</span><input type="number" name="attr_wnd5" title="@{attr_wnd5}" min="0" max="50" value="0"/></div><small>&nbsp;</small><small></small><label data-i18n="weather"></label><div class="number-box border"><input type="number" name="attr_wth1" title="@{attr_wth1}" min="0" max="10" value="0"/><span>/</span><input type="number" name="attr_wth2" title="@{attr_wth2}" min="0" max="10" value="0"/><span>/</span><input type="number" name="attr_wth3" title="@{attr_wth3}" min="0" max="10" value="0"/><span>/</span><input type="number" name="attr_wth4" title="@{attr_wth4}" min="0" max="10" value="0"/><span>/</span><input type="number" name="attr_wth5" title="@{attr_wth5}" min="0" max="10" value="0"/></div><small></small><div class="number-box"><small><abbr data-i18n="val-abbr" data-i18-title="val"></abbr></small><span></span><small><abbr data-i18n="max-abbr" data-i18-title="max"></abbr></small></div><label data-i18n="encumbrance"></label><div class="number-box"><input type="number" name="attr_enc" title="@{enc}" value="0" readonly="readonly"/><span>/</span><input type="number" name="attr_enc_max" title="@{enc|max}" value="0" readonly="readonly"/></div></div></div></div><div class="conditions section"><h4 data-i18n="conditions"></h4><div><div><label class="check-box" data-i18n-title="cond-exhausted-tt"><input type="checkbox" name="attr_cond-exhausted" title="@{cond-exhausted}" value="1"/><span data-i18n="cond-exhausted"></span></label></div><div><label class="check-box" data-i18n-title="cond-wounded-tt"><input type="checkbox" name="attr_cond-wounded" title="@{cond-wounded}" value="1"/><span data-i18n="cond-wounded"></span></label></div><div><label class="check-box" data-i18n-title="cond-dying-tt"><input type="checkbox" name="attr_cond-dying" title="@{cond-dying}" value="1"/><span data-i18n="cond-dying"></span></label></div><div><label class="check-box" data-i18n-title="cond-encumbered-tt"><input type="checkbox" name="attr_cond-encumbered" title="@{cond-encumbered}" value="1"/><span data-i18n="cond-encumbered"></span></label></div><div><label class="check-box" data-i18n-title="cond-overburdened-tt"><input type="checkbox" name="attr_cond-overburdened" title="@{cond-overburdened}" value="1"/><span data-i18n="cond-overburdened"></span></label></div></div></div></div><div class="weapons section border"><h4 data-i18n="weapons"></h4><div><div><small></small><small></small><small><abbr data-i18n="wpn-cbt-abbr" data-i18n-title="wpn-cbt"></abbr></small><small><abbr data-i18n="wpn-dmg-abbr" data-i18n-title="wpn-dmg"></abbr></small><small data-i18n="wpn-str"></small><small><abbr data-i18n="def-abbr" data-i18n-title="def"></abbr></small><small data-i18n="wpn-spec"></small><small><abbr data-i18n="enc-abbr" data-i18n-title="enc"></abbr></small></div><div><div class="button-box"><button type="action" name="act_wpn1" title="%{wpn1}" data-i18n="wpn1-lbl"></button><button type="action" name="act_wpn1-def" title="%{wpn1-def}" data-i18n="wpn-parry"></button></div><input type="text" name="attr_wpn1-name" title="@{wpn1-name}" data-i18n-placeholder="wpn-name-pl"/><span class="select-box"><select name="attr_wpn1-sel" title="@{wpn1}"><option value="abi-acr-half" data-i18n="abi-acr-half" selected="selected"></option><option value="abi-acr" data-i18n="abi-acr"></option><option value="skl-wpn-light" data-i18n="skl-wpn-light"></option><option value="skl-wpn-heavy" data-i18n="skl-wpn-heavy"></option></select><input type="number" name="attr_wpn1" value="0" readonly="readonly"/></span><input type="number" name="attr_wpn1-dmg" title="@{wpn1-dmg}" value="0" min="-5" max="20"/><label class="check-box no-text"><input type="checkbox" name="attr_wpn1-str" title="@{wpn1-str}" value="1"/><span></span></label><input type="number" name="attr_wpn1-def" title="@{wpn1-def}" value="0" min="0" max="5"/><input type="text" name="attr_wpn1-spec" title="@{wpn1-spec}" data-i18n-placeholder="wpn-spec-pl"/><input type="number" name="attr_wpn1-enc" title="@{wpn1-enc}" value="0" min="0" max="10"/></div><div class="merge-inputs"><div class="button-box"><button type="action" name="act_wpn2" title="%{wpn2}" data-i18n="wpn2-lbl"></button><button type="action" name="act_wpn2-def" title="%{wpn2-def}" data-i18n="wpn-parry"></button></div><input type="text" name="attr_wpn2-name" title="@{wpn2-name}" data-i18n-placeholder="wpn-name-pl"/><span class="select-box"><select name="attr_wpn2-sel" title="@{wpn2}"><option value="abi-acr-half" data-i18n="abi-acr-half" selected="selected"></option><option value="abi-acr" data-i18n="abi-acr"></option><option value="skl-wpn-light" data-i18n="skl-wpn-light"></option><option value="skl-wpn-heavy" data-i18n="skl-wpn-heavy"></option></select><input type="number" name="attr_wpn2" value="0" readonly="readonly"/></span><input type="number" name="attr_wpn2-dmg" title="@{wpn2-dmg}" value="0" min="-5" max="20"/><label class="check-box no-text"><input type="checkbox" name="attr_wpn2-str" title="@{wpn2-str}" value="1"/><span></span></label><input type="number" name="attr_wpn2-def" title="@{wpn2-def}" value="0" min="0" max="5"/><input type="text" name="attr_wpn2-spec" title="@{wpn2-spec}" data-i18n-placeholder="wpn-spec-pl"/><input type="number" name="attr_wpn2-enc" title="@{wpn2-enc}" value="0" min="0" max="10"/></div><div class="merge-inputs"><div class="button-box"><button type="action" name="act_wpn3" title="%{wpn3}" data-i18n="wpn3-lbl"></button><button type="action" name="act_wpn3-def" title="%{wpn3-def}" data-i18n="wpn-parry"></button></div><input type="text" name="attr_wpn3-name" title="@{wpn3-name}" data-i18n-placeholder="wpn-name-pl"/><span class="select-box"><select name="attr_wpn3-sel" title="@{wpn3}"><option value="abi-acr-half" data-i18n="abi-acr-half" selected="selected"></option><option value="abi-acr" data-i18n="abi-acr"></option><option value="skl-wpn-light" data-i18n="skl-wpn-light"></option><option value="skl-wpn-heavy" data-i18n="skl-wpn-heavy"></option></select><input type="number" name="attr_wpn3" value="0" readonly="readonly"/></span><input type="number" name="attr_wpn3-dmg" title="@{wpn3-dmg}" value="0" min="-5" max="20"/><label class="check-box no-text"><input type="checkbox" name="attr_wpn3-str" title="@{wpn3-str}" value="1"/><span></span></label><input type="number" name="attr_wpn3-def" title="@{wpn3-def}" value="0" min="0" max="5"/><input type="text" name="attr_wpn3-spec" title="@{wpn3-spec}" data-i18n-placeholder="wpn-spec-pl"/><input type="number" name="attr_wpn3-enc" title="@{wpn3-enc}" value="0" min="0" max="10"/></div><div><small></small><small></small><small><abbr data-i18n="wpn-cbt-abbr" data-i18n-title="wpn-cbt"></abbr></small><small><abbr data-i18n="wpn-dmg-abbr" data-i18n-title="wpn-dmg"></abbr></small><small data-i18n="wpn-str"></small><small><abbr data-i18n="wpn-mun-abbr" data-i18n-title="wpn-mun"></abbr></small><small data-i18n="wpn-rng"></small><small><abbr data-i18n="enc-abbr" data-i18n-title="enc"></abbr></small></div><div><div class="button-box"><button type="action" name="act_wpn4" title="%{wpn4}" data-i18n="wpn4-lbl"></button></div><input type="text" name="attr_wpn4-name" title="@{wpn4-name}" data-i18n-placeholder="wpn-name-pl"/><input type="number" name="attr_wpn4" title="@{wpn4}" value="0" readonly="readonly"/><input type="number" name="attr_wpn4-dmg" title="@{wpn4-dmg}" value="0" min="-5" max="20"/><label class="check-box no-text"><input type="checkbox" name="attr_wpn4-str" title="@{wpn4-str}" value="1"/><span></span></label><input type="number" name="attr_wpn4-mun" title="@{wpn4-mun}" value="0" min="0" max="99"/><div class="number-box border"><input type="number" name="attr_wpn4-rng1" title="@{wpn4-rng1}" value="0" min="0" max="999"/><span>/</span><input type="number" name="attr_wpn4-rng2" title="@{wpn4-rng2}" value="0" min="0" max="999"/><span>/</span><input type="number" name="attr_wpn4-rng3" title="@{wpn4-rng3}" value="0" min="0" max="999"/></div><input type="number" name="attr_wpn4-enc" title="@{wpn4-enc}" value="0" min="0" max="10"/></div><div><small></small><small></small><small><abbr data-i18n="wpn-cbt-abbr" data-i18n-title="wpn-cbt"></abbr></small><small><abbr data-i18n="wpn-dmg-abbr" data-i18n-title="wpn-dmg"></abbr></small><small><abbr data-i18n="wpn-rld-abbr" data-i18n-title="wpn-rld"></abbr></small><small><abbr data-i18n="wpn-mun-abbr" data-i18n-title="wpn-mun"></abbr></small><small data-i18n="wpn-rng"></small><small><abbr data-i18n="enc-abbr" data-i18n-title="enc"></abbr></small></div><div><div class="button-box"><button type="action" name="act_wpn5" title="%{wpn5}" data-i18n="wpn5-lbl"></button></div><input type="text" name="attr_wpn5-name" title="@{wpn5-name}" data-i18n-placeholder="wpn-name-pl"/><input type="number" name="attr_wpn5" title="@{wpn5}" value="0" readonly="readonly"/><input type="number" name="attr_wpn5-dmg" title="@{wpn5-dmg}" value="0" min="-5" max="20"/><input type="number" name="attr_wpn5-rld" title="@{wpn5-rld}" value="0" min="0" max="5"/><input type="number" name="attr_wpn5-mun" title="@{wpn5-mun}" value="0" min="0" max="99"/><div class="number-box border"><input type="number" name="attr_wpn5-rng1" title="@{wpn5-rng1}" value="0" min="0" max="999"/><span>/</span><input type="number" name="attr_wpn5-rng2" title="@{wpn5-rng2}" value="0" min="0" max="999"/><span>/</span><input type="number" name="attr_wpn5-rng3" title="@{wpn5-rng3}" value="0" min="0" max="999"/></div><input type="number" name="attr_wpn5-enc" title="@{wpn5-enc}" value="0" min="0" max="10"/></div></div></div><div class="two-columns col-1-1"><div><div class="armor-shield section border"><h4 data-i18n="armor-and-shield"></h4><div><div><small></small><small></small><small><abbr data-i18n="arm-prot-abbr" data-i18n-title="arm-prot"></abbr></small><small><abbr data-i18n="enc-abbr" data-i18n-title="enc"></abbr></small></div><div><div class="button-box"><button type="action" name="act_arm" title="%{arm}" data-i18n="arm-lbl"></button></div><input type="text" name="attr_arm-name" title="@{arm-name}" data-i18n-placeholder="arm-name-pl"/><input type="text" name="attr_arm" class="number" title="@{arm}" placeholder="2D+1"/><input type="number" name="attr_arm-enc" title="@{arm-enc}" value="0" min="0" max="10"/></div><div><small></small><small></small><small><abbr data-i18n="def-abbr" data-i18n-title="def"></abbr></small><small><abbr data-i18n="enc-abbr" data-i18n-title="enc"></abbr></small></div><div><label data-i18n="shd-lbl"></label><input type="text" name="attr_shd-name" title="@{shd-name}" data-i18n-placeholder="shd-name-pl"/><input type="number" name="attr_shd-def" title="@{shd-def}" value="0" min="0" max="5"/><input type="number" name="attr_shd-enc" title="@{shd-enc}" value="0" min="0" max="10"/></div></div></div><div class="survival-gear section border"><h4 data-i18n="survival-gear"></h4><div><div><small></small><small></small><small><abbr data-i18n="qtt-abbr" data-i18n-title="qtt"></abbr></small><small><abbr data-i18n="enc-abbr" data-i18n-title="enc"></abbr></small></div><div><label data-i18n="danger-hunger"></label><input type="text" name="attr_food-name" title="@{food-name}" data-i18n-placeholder="gear-food-pl"/><input type="number" name="attr_food-qtt" title="@{food-qtt}" value="0" min="0" max="999"/><input type="number" name="attr_food-enc" title="@{food-enc}" value="0" min="0" max="10"/></div><div class="merge-inputs"><label data-i18n="danger-thirst"></label><input type="text" name="attr_drink-name" title="@{drink-name}" data-i18n-placeholder="gear-drink-pl"/><input type="number" name="attr_drink-qtt" title="@{drink-qtt}" value="0" min="0" max="999"/><input type="number" name="attr_drink-enc" title="@{drink-enc}" value="0" min="0" max="10"/></div><div><small></small><small></small><small data-i18n="gear-lvl"></small><small><abbr data-i18n="enc-abbr" data-i18n-title="enc"></abbr></small></div><div><label data-i18n="danger-cold"></label><input type="text" name="attr_cloth-name" title="@{cloth-name}" data-i18n-placeholder="gear-cloth-pl"/><input type="number" name="attr_cloth-lvl" title="@{cloth-lvl}" value="1" min="1" max="3"/><input type="number" name="attr_cloth-enc" title="@{cloth-enc}" value="0" min="0" max="10"/></div><div class="merge-inputs"><label data-i18n="danger-wind"></label><input type="text" name="attr_filter-name" title="@{filter-name}" data-i18n-placeholder="gear-filter-pl"/><input type="number" name="attr_filter-lvl" title="@{filter-lvl}" value="1" min="1" max="3"/><input type="number" name="attr_filter-enc" title="@{filter-enc}" value="0" min="0" max="10"/></div><div class="merge-inputs"><label data-i18n="danger-darkness"></label><input type="text" name="attr_light-name" title="@{light-name}" data-i18n-placeholder="gear-light-pl"/><input type="number" name="attr_light-lvl" title="@{light-lvl}" value="1" min="1" max="3"/><input type="number" name="attr_light-enc" title="@{light-enc}" value="0" min="0" max="10"/></div></div></div></div><div class="equipment section"><h4 data-i18n="equipment"></h4><div><div class="grid-row"><small></small><small><abbr data-i18n="qtt-abbr" data-i18n-title="qtt"></abbr></small><small><abbr data-i18n="enc-abbr" data-i18n-title="enc"></abbr></small></div><fieldset class="repeating_items"><div class="grid-row"><input type="text" name="attr_name" title="@{repeating_items_$X_name}" data-i18n-placeholder="eqp-name-pl"/><input type="number" name="attr_qtt" title="@{repeating_items_$X_qtt}" value="0" min="0" max="999"/><input type="number" name="attr_enc" title="@{repeating_items_$X_enc}" value="0" min="0" max="10"/></div></fieldset></div></div></div></div></div><div class="footer"><p data-i18n="legal"></p><span class="version">v<span name="attr_sheet-version"></span></span></div></div>
<rolltemplate class="sheet-rolltemplate-result"><div class="wrapper{{#type}} {{type}}{{/type}}">{{#overburdened}}<div class="condition overburdened" data-i18n-title="cond-overburdened">O</div>{{/overburdened}} {{#encumbered}}<div class="condition encumbered" data-i18n-title="cond-encumbered">O</div>{{/encumbered}} {{#dying}}<div class="condition dying" data-i18n-title="cond-dying">Y</div>{{/dying}} {{#wounded}}<div class="condition wounded" data-i18n-title="cond-wounded">Y</div>{{/wounded}} {{#exhausted}}<div class="condition exhausted" data-i18n-title="cond-exhausted">d</div>{{/exhausted}} {{#char}}<div class="header">{{char}}</div>{{/char}}<div class="content">{{#name}}<div class="title">{{name}}</div>{{/name}}<div class="values"><span data-i18n="roll-base"></span> {{base}}<span data-i18n="roll-die-suffix"></span>{{#^rollTotal() val 0}}{{#rollGreater() val -1}}+{{/rollGreater() val -1}}{{val}}{{/^rollTotal() val 0}}{{#^rollTotal() mod 0}} â€¢ <span data-i18n="roll-mod"></span> {{#rollGreater() mod -1}}+{{/rollGreater() mod -1}}{{mod}}<span data-i18n="roll-die-suffix"></span>{{/^rollTotal() mod 0}}</div><div class="result"><span>{{computed::roll}}</span></div>{{#dmg}}<div class="damage"><span data-i18n="roll-damages"></span> {{#rollGreater() dmg -1}}+{{/rollGreater() dmg -1}}{{dmg}}</div>{{/dmg}} {{#spec}}<div class="special">{{spec}}</div>{{/spec}}</div></div></rolltemplate>
<script type="text/worker">let Sheet={version:1};function toInt(e){return parseInt(e)||0}function clamp(e,t,n,r){return null==t&&(t=-1/0),null==n&&(n=1/0),null==r&&(r=0),Math.min(Math.max(e,t),n)||r}function crop(e,t){return e.substring(0,e.length-t)}function getLang(e){e=getTranslationByKey(e);return e||""}let Formulas={arm:/^(\+?\d+|\+?\d+d|\+?\d+d\s*[\+\-]\s*\d+)$/i};function formatFormula(e,t){return e=e.trim().toLowerCase(),Formulas[t].test(e)?e.replace("d","D").replace(/^[0]+([1-9])+/,"$1").replace(/([^\d]+)[0]+([1-9])+/g,"$1$2").replaceAll(" ",""):"0"}let AbilityAttrs=["abi-str","abi-acr","abi-agi","abi-res","abi-tem","abi-sen"],SkillAttrs=["skl-wpn-light","skl-wpn-heavy","skl-wpn-throw","skl-wpn-fire","skl-bullshit","skl-oratory","skl-empathy","skl-bargain","skl-folklore","skl-letters","skl-territory","skl-tradition","skl-construct","skl-making","skl-mecanical","skl-medicine","skl-fauna","skl-flora","skl-darkness","skl-stallite"],ConditionAttrs=["cond-exhausted","cond-wounded","cond-dying","cond-encumbered","cond-overburdened"],WoundAttrs=["wnd1","wnd2","wnd3","wnd4","wnd5"],WeatherAttrs=["wth1","wth2","wth3","wth4","wth5"],MinMaxAttrs=[...WoundAttrs,...WeatherAttrs,"wpn1-dmg","wpn2-dmg","wpn3-dmg","wpn4-dmg","wpn5-dmg","wpn1-def","wpn2-def","wpn3-def","wpn5-rld","wpn4-mun","wpn5-mun","wpn4-rng1","wpn4-rng2","wpn4-rng3","wpn5-rng1","wpn5-rng2","wpn5-rng3","shd-def","cloth-lvl","filter-lvl","light-lvl"],QuantityAttrs=["food-qtt","drink-qtt"],EncumbranceAttrs=["wpn1-enc","wpn2-enc","wpn3-enc","wpn4-enc","wpn5-enc","arm-enc","shd-enc","food-enc","drink-enc","cloth-enc","filter-enc","light-enc"],EncumbrancePenaltyAttrs=["abi-str","abi-agi","skl-wpn-light","skl-wpn-heavy","skl-wpn-throw","skl-wpn-fire","init","wpn1","wpn2","wpn3","wpn4","wpn5","wpn1-def","wpn2-def","wpn3-def","wpn4-def","wpn5-def"];function getAbilityTriggers(t){return AbilityAttrs.map(e=>(t?"clicked":"change")+":"+e).join(" ")}function getSkillTriggers(t){return SkillAttrs.map(e=>(t?"clicked":"change")+":"+e).join(" ")}function getWeaponTriggers(){let e,t="";for(e=1;e<=5;e++)t+="clicked:wpn"+e+" ",e<=3&&(t+="clicked:wpn"+e+"-def ");return t.trim()}function getMinMaxTriggers(){return MinMaxAttrs.map(e=>"change:"+e).join(" ")}function getQuantityTriggers(){return QuantityAttrs.map(e=>"change:"+e).join(" ")}function getEncumbranceTriggers(){return EncumbranceAttrs.map(e=>"change:"+e).join(" ")}function updateAcrimonyHalf(){getAttrs(["abi-acr"],e=>{setAttrs({"abi-acr-half":Math.floor(toInt(e["abi-acr"])/2)},{silent:!0},function(){updateMeleeWeaponValues("abi-acr-half")})})}function setHealth(){let r=[...WoundAttrs,...WeatherAttrs];getAttrs(["health_max",...r],e=>{let t=toInt(e.health_max),n;for(n in r)t-=toInt(e[r[n]]);setAttrs({health:Math.max(t,0)},{silent:!0})})}function setMaxHealth(){getAttrs(["abi-str","abi-res","health-mod"],e=>{e=toInt(e["abi-str"])+2*toInt(e["abi-res"])+toInt(e["health-mod"]);setAttrs({health_max:Math.max(e,0)},{silent:!0})})}function setMaxEnergy(){getAttrs(["abi-acr","abi-tem","energy","energy-mod"],e=>{var t={},n=toInt(e.energy),e=Math.max(toInt(e["abi-acr"])+toInt(e["abi-tem"])+toInt(e["energy-mod"]),0);e<n&&(t.energy=e),t.energy_max=e,setAttrs(t,{silent:!0})})}function setInitiative(){getAttrs(["abi-agi","abi-sen","init-mod"],e=>{e=toInt(e["abi-agi"])+toInt(e["abi-sen"])+toInt(e["init-mod"]);setAttrs({init:Math.max(e,0)},{silent:!0})})}function setMaxEncumbrance(){getAttrs(["abi-str","enc-mod"],e=>{e=toInt(e["abi-str"])+toInt(e["enc-mod"]);setAttrs({enc_max:Math.max(e,0)},{silent:!0})})}function checkEnergyConditions(){getAttrs(["abi-acr","abi-tem","energy","cond-exhausted","cond-autoset"],e=>{var t={};let n=toInt(e.energy);var r=toInt(e["abi-acr"])+toInt(e["abi-tem"]);n>r?(n=r,t.energy=r):n<0&&(n=0,t.energy=0),"1"==e["cond-autoset"]&&("0"==e["cond-exhausted"]&&0==n?t["cond-exhausted"]=1:"1"==e["cond-exhausted"]&&0<n&&(t["cond-exhausted"]=0)),0<Object.keys(t).length&&setAttrs(t,{silent:!0})})}function checkWoundConditions(){let a=[...WoundAttrs,"cond-autoset"];getAttrs(a,t=>{var n,r={};if("1"==t["cond-autoset"]){let e;for(r["cond-dying"]=0,r["cond-wounded"]=0,e=0;e<a.length;e++)6<(n=toInt(t[a[e]]))?(r["cond-wounded"]=1,r["cond-dying"]=1):3<n&&(r["cond-wounded"]=1)}setAttrs(r,{silent:!0},setHealth)})}function checkEncumbranceConditions(){getAttrs(["abi-str","enc","enc-mod","cond-autoset"],e=>{var t={};let n=toInt(e.enc);var r=toInt(e["abi-str"])+toInt(e["enc-mod"]);n<0&&(n=0,t.enc=0),"1"==e["cond-autoset"]&&(t["cond-encumbered"]=0,t["cond-overburdened"]=0,n==r+1?t["cond-encumbered"]=1:n>r+1&&(t["cond-encumbered"]=1,t["cond-overburdened"]=1)),setAttrs(t,{silent:!0})})}function updateMeleeWeaponValues(r){let a=["wpn1-sel","wpn2-sel","wpn3-sel",r];getAttrs(a,e=>{var t={};let n;for(n in a)e[a[n]]==r&&(t[crop(a[n],4)]=toInt(e[r]));setAttrs(t,{silent:!0})})}function updateThrownWeaponValues(){getAttrs(["skl-wpn-throw"],e=>{setAttrs({wpn4:e["skl-wpn-throw"]},{silent:!0})})}function updateFireWeaponValues(){getAttrs(["skl-wpn-fire"],e=>{setAttrs({wpn5:e["skl-wpn-fire"]},{silent:!0})})}function checkArmorFormula(){getAttrs(["arm"],e=>{e=e.arm;null!=e&&(e=formatFormula(e,"arm"),setAttrs({arm:e},{silent:!0}))})}function updateEncumbrance(){getSectionIDs("items",function(e){let a=[...EncumbranceAttrs],t=[...QuantityAttrs];e.forEach(e=>{a.push(`repeating_items_${e}_enc`),t.push(`repeating_items_${e}_qtt`)}),getAttrs(a.concat(t),t=>{let n,r=0;a.forEach(e=>{n=1,!e.startsWith("repeating_")&&"food-enc"!=e&&"drink-enc"!=e||(n=toInt(t[crop(e,3)+"qtt"])),r+=toInt(t[e])*n}),setAttrs({enc:r},{silent:!0},checkEncumbranceConditions)})})}on("change:mod",e=>{"0"!=(e.newValue||"0")?getAttrs(["mod-reset-show"],e=>{"0"==e["mod-reset-show"]&&setAttrs({"mod-reset-show":1})}):setAttrs({"mod-reset-show":0})}),on("clicked:mod-reset",e=>{setAttrs({mod:0})}),on("change:whisper-toggle",e=>{var t={};"1"==e.newValue?t.wgm="/w gm":t.wgm="",setAttrs(t,{silent:!0})}),on("change:health-mod",setMaxHealth),on("change:energy-mod",setMaxEnergy),on("change:init-mod",setInitiative),on("change:enc-mod",setMaxEncumbrance),on(getAbilityTriggers(),e=>{"sheetworker"==e.sourceType&&("abi-str"==(e=e.sourceAttribute)?(setMaxHealth(),setMaxEncumbrance()):"abi-acr"==e?(setMaxEnergy(),updateMeleeWeaponValues(e),updateAcrimonyHalf()):"abi-res"==e?setMaxHealth():"abi-tem"==e?setMaxEnergy():"abi-agi"!=e&&"abi-sen"!=e||setInitiative())}),on(getSkillTriggers(),e=>{"sheetworker"==e.sourceType&&("skl-wpn-light"==(e=e.sourceAttribute)||"skl-wpn-heavy"==e?updateMeleeWeaponValues(e):"skl-wpn-throw"==e?updateThrownWeaponValues():"skl-wpn-fire"==e&&updateFireWeaponValues())}),on("change:health_max",setHealth),on("change:energy change:energy_max",checkEnergyConditions),on(WoundAttrs.map(e=>"change:"+e).join(" "),e=>{"sheetworker"==e.sourceType&&checkWoundConditions()}),on(WeatherAttrs.map(e=>"change:"+e).join(" "),setHealth),on("change:enc change:enc_max",e=>{"sheetworker"==e.sourceType&&checkEncumbranceConditions()}),on("change:wpn1-sel change:wpn2-sel change:wpn3-sel",e=>{let n=e.newValue,r=crop(e.sourceAttribute,4);getAttrs([n],e=>{var t={};t[r]=e[n],setAttrs(t)})}),on("change:arm",e=>{"player"==e.sourceType&&checkArmorFormula()}),on(getEncumbranceTriggers()+" "+getQuantityTriggers()+" change:repeating_items:qtt change:repeating_items:enc remove:repeating_items",e=>{"sheetworker"==e.sourceType&&updateEncumbrance()});let MinMax={abi:[0,10],skl:[0,10],wnd:[0,50],wth:[0,10],dmg:[-5,20],def:[0,5],rld:[0,10],mun:[0,99],rng:[0,999],qtt:[0,999],enc:[0,10],lvl:[1,3]};function getMin(e){return MinMax[e][0]}function getMax(e){return MinMax[e][1]}function getMinMaxKey(e){let t;return e.startsWith("abi-")?t="abi":e.startsWith("skl-")?t="skl":e.startsWith("wnd")?t="wnd":e.startsWith("wth")?t="wth":e.endsWith("-dmg")?t="dmg":e.endsWith("-def")?t="def":e.endsWith("-rld")?t="rld":e.endsWith("-mun")?t="mun":crop(e,1).endsWith("-rng")?t="rng":e.endsWith("-qtt")||e.endsWith("_qtt")?t="qtt":e.endsWith("-enc")||e.endsWith("_enc")?t="enc":e.endsWith("-lvl")&&(t="lvl"),t}function recalculate(){getSectionIDs("items",function(e){let i=[...AbilityAttrs,...SkillAttrs,...MinMaxAttrs,...QuantityAttrs,...EncumbranceAttrs];e.forEach(e=>{i.push(`repeating_items_${e}_enc`),i.push(`repeating_items_${e}_qtt`)}),getAttrs(i.concat(["health-mod","energy-mod","init-mod","enc-mod","energy","wpn1-sel","wpn2-sel","wpn3-sel"]),t=>{let n,r,a,s={};i.forEach(e=>{n=getMinMaxKey(e),r=toInt(t[e]),a=e.endsWith("-lvl")?1:0,n&&(s[e]=clamp(r,getMin(n),getMax(n),a))}),s["abi-acr-half"]=Math.floor(s["abi-acr"]/2),s.health_max=Math.max(s["abi-str"]+2*s["abi-res"]+toInt(t["health-mod"]),0),s.energy_max=Math.max(s["abi-acr"]+s["abi-tem"]+toInt(t["energy-mod"]),0),toInt(t.energy)>s.energy_max&&(s.energy=s.energy_max),s.init=Math.max(s["abi-agi"]+s["abi-sen"]+toInt(t["init-mod"]),0),s.enc_max=Math.max(s["abi-str"]+toInt(t["enc-mod"]),0),s.wpn1=s[t["wpn1-sel"]],s.wpn2=s[t["wpn2-sel"]],s.wpn3=s[t["wpn3-sel"]],s.wpn4=s["skl-wpn-throw"],s.wpn5=s["skl-wpn-fire"],s.mod=0,s["mod-reset-show"]=0,setAttrs(s,{silent:!0},()=>{checkEnergyConditions(),checkWoundConditions(),updateEncumbrance(),checkArmorFormula(),console.info("Dark Earth (Simplified Rules) Character Sheet recalculated!")})})})}on(getAbilityTriggers()+" "+getSkillTriggers()+" "+getMinMaxTriggers()+" "+getEncumbranceTriggers()+" "+getQuantityTriggers()+" change:repeating_items:qtt change:repeating_items:enc remove:repeating_items",e=>{var t,n,r,a;"player"==e.sourceType&&(t=e.sourceAttribute,e=e.newValue,n=getMinMaxKey(t),r=t.endsWith("-lvl")?1:0,a={},n)&&(a[t]=clamp(e,getMin(n),getMax(n),r),setAttrs(a))}),on("clicked:recalc",recalculate),on(getAbilityTriggers(!0)+" "+getSkillTriggers(!0)+" "+getWeaponTriggers()+" clicked:roll clicked:init clicked:arm",e=>{let m=e.triggerName.substr(8);e=[m,...ConditionAttrs,"mod","mod-autoreset","shd-def","wpn-str-half","wpn-def-shd"];let w=m.endsWith("def"),f=(w&&(m=crop(m,4),e.push(m)),"roll"==m),b="init"==m,A=m.startsWith("wpn"),k=m.startsWith("arm"),y=A||k;A&&(e.push(m+"-dmg"),e.push(m+"-str"),e.push("abi-str"),"wpn1"!=m&&"wpn2"!=m&&"wpn3"!=m||e.push(m+"-spec"),"wpn4"!=m&&"wpn5"!=m||e.push(m+"-rng1",m+"-rng2",m+"-rng3")),y&&e.push(m+"-name"),getAttrs(e,t=>{let e;var n=w?toInt(t[m+"-def"])+("1"==t["wpn-def-shd"]?toInt(t["shd-def"]):0):0;let r=toInt(t.mod)+n,s=0,i=(k?(n=t[m].match(/^\+?(\d+d)?\s*([\+\-]?\s*\d+)?$/i),e=toInt((n[1]||"0").replace(/d/i,"")),s=toInt(n[2]||"0")):e=toInt(t[m]),!1),o=toInt(t["cond-exhausted"]);var n=toInt(t["cond-wounded"]),a=toInt(t["cond-dying"]),c=toInt(t["cond-encumbered"]),l=toInt(t["cond-overburdened"]);let d=0!=r&&"1"==t["mod-autoreset"],g=(f||k||(a?r-=b?4:2:n&&(r-=b?2:1)),EncumbrancePenaltyAttrs.includes(m)&&(l?r-=b?4:2:c&&(r-=b?2:1)),Math.max(e+r,0)),h=g+"d6",u=(0==g&&0==s&&(i=!0,h="1d6"),0!=s&&(h+=(0<s?"+":"")+s),y?t[m+"-name"]:getLang(m));""==u&&(k?u=getLang("arm-prot"):A&&(u=getLang(m+"-lbl"))),w&&(u+=" ("+getLang("wpn-parry")+")");var p=["@{wgm}","&{template:result}","{{type=@{sheet-type}}}","{{char=@{char-name}}}","{{name="+u+"}}","{{roll=[["+h+"]]}}","{{base=[["+e+"]]}}","{{mod=[["+r+"]]}}"];if(0!=s&&p.push("{{val=[["+s+"]]}}"),i&&p.push("{{zero-die=true}}"),f||k||(o&&p.push("{{exhausted=true}}"),a?p.push("{{dying=true}}"):n&&p.push("{{wounded=true}}"),l?p.push("{{overburdened=true}}"):c&&p.push("{{encumbered=true}}")),A&&("wpn1"!=m&&"wpn2"!=m&&"wpn3"!=m||p.push("{{spec="+t[m+"-spec"]+"}}"),"wpn4"!=m&&"wpn5"!=m||p.push("{{spec="+getLang("wpn-rng")+" "+t[m+"-rng1"]+"/"+t[m+"-rng2"]+"/"+t[m+"-rng3"]+"}}"),!w)){let e=toInt(t[m+"-dmg"]);"1"==t[m+"-str"]&&(a=toInt(t["abi-str"]),e+="1"==t["wpn-str-half"]?Math.floor(a/2):a),p.push("{{dmg=[["+e+"]]}}")}startRoll(p.join(" "),e=>{var t=e.results.roll.dice;let n=0,r=0,a=0;if(i)6==t[0]?r=1:1==t[0]&&(a=1);else if(0<g)for(n=0;n<t.length;n++)1==t[n]&&a++,6==t[n]?r+=k?1:2:4<=t[n]&&r++;!f&&!k&&a==t.length&&0<g?r=getLang("roll-fumble"):!f&&!k&&o&&0<a?r=getLang("roll-exhaustion"):(0!=s&&(r=Math.max(r+s,0)),r+=getLang("roll-success-suffix")),finishRoll(e.rollId,{roll:r});e={};f&&(e.roll=0),d&&(e.mod=0),0<Object.keys(e).length&&setAttrs(e,{silent:!0})})})});let updateSheetVersion={"1.00":function(){}};function initializeSheet(){setAttrs({"sheet-init":"1"},{silent:!0})}function updateSheetLanguage(){}function checkVersion(){getAttrs(["sheet-version","sheet-init","sheet-lang"],e=>{var t=parseFloat(e["sheet-version"]),n=getTranslationLanguage(),r="0"==e["sheet-init"],a=t<Sheet.version,e=e["sheet-lang"]!=n,s={};r||a||e?((r||a)&&(s["sheet-version"]=Sheet.version.toFixed(2),r?(console.info("Dark Earth (Simplified Rules) Character Sheet being initialized"),initializeSheet()):a&&(t<1&&updateSheetVersion["1.00"](),console.info("Character Sheet updated to version "+Sheet.version))),e&&(updateSheetLanguage(),s["sheet-lang"]=n),setAttrs(s,{silent:!0})):console.info("Dark Earth (Simplified Rules) Character Sheet v"+Sheet.version.toFixed(2)+" loaded")})}on("sheet:opened",()=>{checkVersion()});</script>